<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>LingoGames ‚Äî Numbers</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#0f172a;
      --card: rgba(255,255,255,.08);
      --card2: rgba(255,255,255,.06);
      --stroke: rgba(255,255,255,.12);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.62);
      --good: rgba(34,197,94,.95);
      --bad: rgba(239,68,68,.95);
      --accent: rgba(99,102,241,.95);
      --accent2: rgba(236,72,153,.85);
      --shadow: 0 20px 60px rgba(0,0,0,.45);
      --radius: 18px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 20% 10%, rgba(99,102,241,.25), transparent 55%),
        radial-gradient(900px 600px at 80% 20%, rgba(236,72,153,.18), transparent 60%),
        radial-gradient(800px 500px at 50% 90%, rgba(34,197,94,.12), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 16px;
      padding-top: calc(16px + env(safe-area-inset-top));
      padding-bottom: calc(16px + env(safe-area-inset-bottom));
      overflow:hidden;
    }

    .wrap{
      width: min(420px, 100%);
      position: relative;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 12px;
    }

    .pill{
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius: 999px;
      background: var(--card2);
      border: 1px solid var(--stroke);
      box-shadow: 0 10px 30px rgba(0,0,0,.18);
      backdrop-filter: blur(10px);
    }

    .mini{
      font-size:12px;
      color:var(--muted);
      line-height:1.1;
    }
    .big{
      font-weight: 800;
      letter-spacing:.2px;
      font-size: 14px;
      line-height:1.1;
    }
    .icon{
      width: 28px; height:28px;
      border-radius: 10px;
      display:grid; place-items:center;
      background: rgba(255,255,255,.08);
      border: 1px solid var(--stroke);
    }

    .btnGhost{
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      color: var(--text);
      border-radius: 999px;
      padding: 10px 12px;
      font-weight: 700;
      cursor: pointer;
      transition: transform .08s ease, background .2s ease;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .btnGhost:active{ transform: scale(.98); background: rgba(255,255,255,.10); }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.09), rgba(255,255,255,.05));
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
      overflow:hidden;
      position:relative;
    }

    .header{
      padding: 16px 16px 10px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
    }

    .title{
      display:flex;
      flex-direction:column;
      gap:4px;
    }
    .title h1{
      margin:0;
      font-size: 18px;
      letter-spacing:.2px;
    }
    .subtitle{
      font-size: 12px;
      color: var(--muted);
    }

    .badge{
      display:flex;
      align-items:center;
      gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      font-size: 12px;
      color: var(--muted);
      white-space:nowrap;
    }
    .badge b{ color: var(--text); }

    .progress{
      padding: 0 16px 14px;
    }
    .bar{
      height: 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid var(--stroke);
      overflow:hidden;
      position:relative;
    }
    .bar > i{
      display:block;
      height:100%;
      width: 40%;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      border-radius: 999px;
      box-shadow: 0 0 18px rgba(99,102,241,.35);
      transition: width .25s ease;
    }
    .barPulse{
      position:absolute; inset:0;
      background: radial-gradient(200px 20px at 10% 50%, rgba(255,255,255,.22), transparent 60%);
      opacity:.4;
      animation: shimmer 1.6s linear infinite;
    }
    @keyframes shimmer{
      from{ transform: translateX(-30%); }
      to{ transform: translateX(130%); }
    }

    .arena{
      padding: 0 16px 16px;
    }

    .question{
      margin-top: 10px;
      padding: 16px 14px;
      border-radius: 16px;
      background: rgba(0,0,0,.14);
      border: 1px solid rgba(255,255,255,.10);
      position:relative;
      overflow:hidden;
    }

    .qTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 10px;
      color: var(--muted);
      font-size: 12px;
    }

    .timer{
      width: 110px;
      height: 8px;
      border-radius: 999px;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.12);
      overflow:hidden;
      position:relative;
    }
    .timer > i{
      display:block;
      height:100%;
      width:100%;
      background: linear-gradient(90deg, rgba(34,197,94,.9), rgba(99,102,241,.9), rgba(236,72,153,.85));
      transition: width .08s linear;
    }

    .bigNum{
      font-size: 56px;
      font-weight: 900;
      letter-spacing: .5px;
      text-align:center;
      margin: 6px 0 4px;
      text-shadow: 0 10px 40px rgba(0,0,0,.35);
    }

    .prompt{
      text-align:center;
      color: var(--muted);
      font-size: 12px;
      margin-bottom: 14px;
    }

    .answers{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }

    .btn{
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: var(--text);
      border-radius: 16px;
      padding: 14px 12px;
      font-weight: 800;
      font-size: 15px;
      cursor:pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      position:relative;
      overflow:hidden;
    }
    .btn::after{
      content:"";
      position:absolute; inset:-40px;
      background: radial-gradient(180px 80px at 30% 20%, rgba(255,255,255,.20), transparent 60%);
      opacity:.35;
      transform: rotate(10deg);
    }
    .btn:active{ transform: scale(.98); }
    .btn.correct{
      background: rgba(34,197,94,.18);
      border-color: rgba(34,197,94,.35);
    }
    .btn.wrong{
      background: rgba(239,68,68,.16);
      border-color: rgba(239,68,68,.30);
    }

    .bottom{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding: 12px 16px 16px;
      border-top: 1px solid rgba(255,255,255,.10);
      color: var(--muted);
      font-size: 12px;
    }

    .stat{
      display:flex;
      align-items:center;
      gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.10);
    }
    .stat b{ color: var(--text); }

    .toast{
      position: absolute;
      left: 50%;
      bottom: 14px;
      transform: translateX(-50%);
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.35);
      backdrop-filter: blur(10px);
      box-shadow: 0 20px 60px rgba(0,0,0,.35);
      color: var(--text);
      font-weight: 800;
      font-size: 13px;
      opacity: 0;
      pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
      white-space:nowrap;
    }
    .toast.show{
      opacity: 1;
      transform: translateX(-50%) translateY(-6px);
    }

    /* Paywall modal */
    .modalBack{
      position: fixed;
      inset:0;
      background: rgba(0,0,0,.55);
      display:none;
      align-items:flex-end;
      justify-content:center;
      padding: 14px;
      padding-bottom: calc(14px + env(safe-area-inset-bottom));
    }
    .modalBack.show{ display:flex; }

    .modal{
      width: min(420px, 100%);
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.16);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      backdrop-filter: blur(14px);
      box-shadow: 0 30px 90px rgba(0,0,0,.55);
      overflow:hidden;
    }
    .modalHead{
      padding: 16px 16px 10px;
      display:flex; justify-content:space-between; align-items:center;
    }
    .modalHead h2{
      margin:0;
      font-size: 16px;
      letter-spacing:.2px;
    }
    .x{
      border:none;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.14);
      color: var(--text);
      width: 36px; height: 36px;
      border-radius: 12px;
      cursor:pointer;
    }
    .modalBody{
      padding: 0 16px 16px;
      color: var(--muted);
      font-size: 13px;
      line-height:1.35;
    }
    .plans{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
      margin: 12px 0 8px;
    }
    .plan{
      padding: 12px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.20);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
    }
    .plan b{ color: var(--text); }
    .cta{
      width:100%;
      margin-top: 10px;
      border:none;
      cursor:pointer;
      padding: 14px 14px;
      border-radius: 16px;
      font-weight: 900;
      color: rgba(255,255,255,.95);
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      box-shadow: 0 18px 50px rgba(99,102,241,.35);
    }
    .cta:active{ transform: scale(.99); }

    /* subtle floating blobs */
    .blob{
      position:absolute;
      width: 220px; height: 220px;
      border-radius: 999px;
      filter: blur(28px);
      opacity:.35;
      pointer-events:none;
      mix-blend-mode: screen;
      animation: drift 9s ease-in-out infinite;
    }
    .b1{ background: rgba(99,102,241,.55); top:-90px; left:-70px; }
    .b2{ background: rgba(236,72,153,.45); bottom:-90px; right:-80px; animation-delay: -2.8s; }
    @keyframes drift{
      0%,100%{ transform: translate(0,0) scale(1); }
      50%{ transform: translate(18px, 14px) scale(1.06); }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="blob b1"></div>
    <div class="blob b2"></div>

    <div class="topbar">
      <div class="pill">
        <div class="icon">üî•</div>
        <div>
          <div class="mini">–°–µ—Ä–∏—è</div>
          <div class="big"><span id="streak">0</span> ‚Ä¢ x<span id="mult">1</span></div>
        </div>
      </div>

      <button class="btnGhost" id="soundBtn">üîä</button>

      <div class="pill">
        <div class="icon">‚ö°</div>
        <div>
          <div class="mini">–£—Ä–æ–≤–µ–Ω—å</div>
          <div class="big">Lv <span id="level">1</span></div>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="header">
        <div class="title">
          <h1>üá´üá∑ Numbers Rush</h1>
          <div class="subtitle">–í—ã–±–µ—Ä–∏ —Å–ª–æ–≤–æ –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –º–æ–∑–≥ —É—Å–ø–µ–µ—Ç –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è.</div>
        </div>
        <div class="badge">üéØ Daily: <b id="dailyLeft">10</b></div>
      </div>

      <div class="progress">
        <div class="bar" aria-label="XP Progress">
          <i id="xpBar"></i>
          <div class="barPulse"></div>
        </div>
      </div>

      <div class="arena">
        <div class="question">
          <div class="qTop">
            <div>–í–æ–ø—Ä–æ—Å: <b id="qIndex">1</b>/<span id="qTotal">10</span></div>
            <div class="timer"><i id="timerBar"></i></div>
          </div>

          <div class="bigNum" id="num">3</div>
          <div class="prompt">–ö–∞–∫ —ç—Ç–æ –ø–æ-—Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏?</div>

          <div class="answers" id="answers"></div>
        </div>
      </div>

      <div class="bottom">
        <div class="stat">XP: <b id="xp">0</b></div>
        <div class="stat">–û—à–∏–±–∫–∏: <b id="mistakes">0</b></div>
        <button class="btnGhost" id="skipBtn">–ü—Ä–æ–ø—É—Å–∫ ‚Üª</button>
      </div>

      <div class="toast" id="toast">+10 XP</div>
    </div>
  </div>

  <!-- Paywall (demo) -->
  <div class="modalBack" id="modalBack" role="dialog" aria-modal="true">
    <div class="modal">
      <div class="modalHead">
        <h2>Pro —Ä–µ–∂–∏–º ‚ú®</h2>
        <button class="x" id="closeModal">‚úï</button>
      </div>
      <div class="modalBody">
        –¢—ã –¥–æ—à–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ —Ä–∞–Ω–∞. –î–∞–ª—å—à–µ ‚Äî —Å–∞–º–æ–µ –≤–∫—É—Å–Ω–æ–µ:
        <div class="plans">
          <div class="plan"><div><b>–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ä–∞–Ω—ã</b><div class="mini">–±–µ–∑ –ª–∏–º–∏—Ç–æ–≤ –∏ —Ä–µ–∫–ª–∞–º—ã</div></div><div class="badge"><b>‚Ç¨2.99</b></div></div>
          <div class="plan"><div><b>–ù–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã —Å–ª–æ–≤</b><div class="mini">—Ü–≤–µ—Ç–∞, —Ç–µ–º—ã, —è–∑—ã–∫–∏</div></div><div class="badge"><b>‚Ç¨1.99</b></div></div>
          <div class="plan"><div><b>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ + –ª–∏–¥–µ—Ä–±–æ—Ä–¥</b><div class="mini">—Å–æ—Ä–µ–≤–Ω–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏—è—Ç–Ω–æ</div></div><div class="badge"><b>‚Ç¨1.49</b></div></div>
        </div>
        <button class="cta" id="buyBtn">–û—Ç–∫—Ä—ã—Ç—å Pro (–¥–µ–º–æ)</button>
        <div class="mini" style="margin-top:10px;">*–°–µ–π—á–∞—Å –∫–Ω–æ–ø–∫–∞ –ø—Ä–æ—Å—Ç–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –æ–∫–Ω–æ. –ü–æ–¥–∫–ª—é—á–∏—à—å –æ–ø–ª–∞—Ç—ã –ø–æ–∑–∂–µ.</div>
      </div>
    </div>
  </div>

  <script>
    // Telegram init (safe)
    const tg = window.Telegram?.WebApp;
    try { tg?.ready(); tg?.expand(); } catch(e){}

    // Data (easily swappable for other languages / packs)
    const data = [
      { n: 0, a: "z√©ro" },
      { n: 1, a: "un" },
      { n: 2, a: "deux" },
      { n: 3, a: "trois" },
      { n: 4, a: "quatre" },
      { n: 5, a: "cinq" },
      { n: 6, a: "six" },
      { n: 7, a: "sept" },
      { n: 8, a: "huit" },
      { n: 9, a: "neuf" },
      { n: 10, a: "dix" }
    ];

    // State
    let streak = 0;
    let mult = 1;
    let xp = 0;
    let level = 1;
    let mistakes = 0;

    // Daily run (monetization-friendly loop)
    const DAILY_TOTAL = 10;
    const FREE_RUNS_PER_DAY = 2; // demo: after 2 runs -> paywall
    const RUN_KEY = "lingo_run_count_v1";
    const DAY_KEY = "lingo_day_v1";

    let runCount = 0;
    let qIndex = 0;
    let current = null;

    // Timer
    let timer = null;
    const BASE_TIME = 6.5; // seconds
    let timeLeft = BASE_TIME;
    let timeMax = BASE_TIME;

    // UI refs
    const elStreak = document.getElementById("streak");
    const elMult = document.getElementById("mult");
    const elLevel = document.getElementById("level");
    const elXp = document.getElementById("xp");
    const elMist = document.getElementById("mistakes");
    const elNum = document.getElementById("num");
    const elAnswers = document.getElementById("answers");
    const elXpBar = document.getElementById("xpBar");
    const elTimerBar = document.getElementById("timerBar");
    const elToast = document.getElementById("toast");
    const elDailyLeft = document.getElementById("dailyLeft");
    const elQIndex = document.getElementById("qIndex");
    const elQTotal = document.getElementById("qTotal");
    const soundBtn = document.getElementById("soundBtn");
    const skipBtn = document.getElementById("skipBtn");

    const modalBack = document.getElementById("modalBack");
    const closeModal = document.getElementById("closeModal");
    const buyBtn = document.getElementById("buyBtn");

    // Sound (tiny, optional)
    let soundOn = true;
    const beep = (freq=440, dur=0.06) => {
      if(!soundOn) return;
      try{
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.type = "sine";
        o.frequency.value = freq;
        g.gain.value = 0.06;
        o.connect(g); g.connect(ctx.destination);
        o.start();
        setTimeout(()=>{ o.stop(); ctx.close(); }, dur*1000);
      }catch(e){}
    };

    // Utils
    const shuffle = (arr) => arr
      .map(v => ({v, s: Math.random()}))
      .sort((a,b)=>a.s-b.s)
      .map(x=>x.v);

    function todayStamp(){
      const d = new Date();
      return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;
    }

    function loadDaily(){
      const t = todayStamp();
      const savedDay = localStorage.getItem(DAY_KEY);
      if(savedDay !== t){
        localStorage.setItem(DAY_KEY, t);
        localStorage.setItem(RUN_KEY, "0");
      }
      runCount = parseInt(localStorage.getItem(RUN_KEY) || "0", 10);
    }

    function saveRun(){
      localStorage.setItem(RUN_KEY, String(runCount));
    }

    function showToast(text){
      elToast.textContent = text;
      elToast.classList.add("show");
      setTimeout(()=> elToast.classList.remove("show"), 650);
    }

    function vibrate(type="light"){
      try{
        // Telegram haptics if available
        if(tg?.HapticFeedback){
          if(type==="success") tg.HapticFeedback.notificationOccurred("success");
          else if(type==="error") tg.HapticFeedback.notificationOccurred("error");
          else tg.HapticFeedback.impactOccurred("light");
          return;
        }
      }catch(e){}
      // fallback
      if(navigator.vibrate) navigator.vibrate(type==="error" ? 80 : 30);
    }

    function updateHUD(){
      elStreak.textContent = streak;
      elMult.textContent = mult;
      elLevel.textContent = level;
      elXp.textContent = xp;
      elMist.textContent = mistakes;

      // XP bar per level (simple curve)
      const need = 120 + (level-1)*40;
      const within = xp % need;
      const pct = Math.max(6, Math.min(100, (within/need)*100));
      elXpBar.style.width = pct + "%";
    }

    function adjustDifficulty(){
      // slightly less time as level increases, but not brutal
      timeMax = Math.max(3.6, BASE_TIME - (level-1)*0.25);
      timeLeft = timeMax;
    }

    function startTimer(){
      clearInterval(timer);
      const start = performance.now();
      timer = setInterval(() => {
        const now = performance.now();
        const elapsed = (now - start)/1000;
        const t = Math.max(0, timeMax - elapsed);
        timeLeft = t;
        elTimerBar.style.width = ((t/timeMax)*100) + "%";
        if(t <= 0){
          clearInterval(timer);
          // timeout counts as mistake, resets streak
          fail("–í—Ä–µ–º—è!");
        }
      }, 60);
    }

    function nextQuestion(){
      elAnswers.innerHTML = "";
      qIndex++;
      elQIndex.textContent = qIndex;
      elDailyLeft.textContent = Math.max(0, DAILY_TOTAL - qIndex);
      adjustDifficulty();

      current = data[Math.floor(Math.random()*data.length)];
      elNum.textContent = current.n;

      const pool = shuffle(data.filter(d => d.a !== current.a)).slice(0,3).map(d=>d.a);
      const variants = shuffle([current.a, ...pool]);

      variants.forEach(txt => {
        const b = document.createElement("button");
        b.className = "btn";
        b.textContent = txt;
        b.onclick = () => pick(b, txt === current.a);
        elAnswers.appendChild(b);
      });

      startTimer();
    }

    function gainXP(base){
      const amount = Math.round(base * mult);
      xp += amount;
      showToast(`+${amount} XP`);
      beep(740, .05);
      // Level up check
      const need = 120 + (level-1)*40;
      if((xp % need) < amount && xp >= need){ // rough but fun
        level++;
        showToast(`–£—Ä–æ–≤–µ–Ω—å ${level} ‚ú®`);
        beep(880, .07);
        vibrate("success");
      }
      updateHUD();
    }

    function comboUp(){
      streak++;
      mult = 1 + Math.floor(streak/4); // 1.., every 4 correct -> +1
      updateHUD();
    }

    function resetCombo(){
      streak = 0;
      mult = 1;
      updateHUD();
    }

    function lockButtons(){
      [...elAnswers.querySelectorAll("button")].forEach(b => b.disabled = true);
    }

    function pick(btn, ok){
      lockButtons();
      clearInterval(timer);

      if(ok){
        btn.classList.add("correct");
        comboUp();
        const fastBonus = Math.max(0, Math.round((timeLeft / timeMax) * 8)); // 0..8
        gainXP(10 + fastBonus);
        vibrate("success");
        setTimeout(() => {
          if(qIndex >= DAILY_TOTAL) endRun();
          else nextQuestion();
        }, 320);
      }else{
        btn.classList.add("wrong");
        fail("–û—à–∏–±–∫–∞");
      }
    }

    function fail(msg){
      mistakes++;
      resetCombo();
      updateHUD();
      showToast(msg);
      beep(220, .07);
      vibrate("error");

      // reveal correct for learning value
      [...elAnswers.querySelectorAll("button")].forEach(b => {
        if(b.textContent === current.a) b.classList.add("correct");
        b.disabled = true;
      });

      setTimeout(() => {
        if(qIndex >= DAILY_TOTAL) endRun();
        else nextQuestion();
      }, 520);
    }

    function endRun(){
      clearInterval(timer);
      // daily run complete
      showToast("–†–∞–Ω –∑–∞–≤–µ—Ä—à—ë–Ω ‚úÖ");
      // demo paywall: after FREE_RUNS_PER_DAY runs, show modal
      runCount++;
      saveRun();

      setTimeout(() => {
        if(runCount > FREE_RUNS_PER_DAY){
          openPaywall();
        }else{
          restartRun();
        }
      }, 520);
    }

    function restartRun(){
      qIndex = 0;
      elQTotal.textContent = DAILY_TOTAL;
      elQIndex.textContent = 0;
      elDailyLeft.textContent = DAILY_TOTAL;
      nextQuestion();
    }

    function openPaywall(){
      modalBack.classList.add("show");
    }

    function closePaywall(){
      modalBack.classList.remove("show");
      // let user continue in demo
      restartRun();
    }

    // Controls
    soundBtn.onclick = () => {
      soundOn = !soundOn;
      soundBtn.textContent = soundOn ? "üîä" : "üîà";
      showToast(soundOn ? "–ó–≤—É–∫ –≤–∫–ª—é—á—ë–Ω" : "–ó–≤—É–∫ –≤—ã–∫–ª—é—á–µ–Ω");
    };

    skipBtn.onclick = () => {
      // skip costs streak (teaches value)
      resetCombo();
      showToast("–ü—Ä–æ–ø—É—Å–∫");
      vibrate("light");
      clearInterval(timer);
      if(qIndex >= DAILY_TOTAL) endRun();
      else nextQuestion();
    };

    closeModal.onclick = closePaywall;
    buyBtn.onclick = () => {
      // demo action: in real build -> Telegram Payments / Stripe / etc.
      showToast("Pro –æ—Ç–∫—Ä—ã—Ç (–¥–µ–º–æ) ‚ú®");
      closePaywall();
    };

    // Init
    loadDaily();
    updateHUD();
    restartRun();
  </script>
</body>
</html>
